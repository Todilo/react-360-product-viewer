"use strict";(self.webpackChunkreact_360_product_viewer=self.webpackChunkreact_360_product_viewer||[]).push([[636],{"./src/stories/React360Viewer.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AutoPlayReversed:()=>AutoPlayReversed,Standard:()=>Standard,__namedExportsOrder:()=>__namedExportsOrder,default:()=>React360Viewer_stories});var react=__webpack_require__("./node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const StyledImage=styled_components_browser_esm.ZP.img`
  user-select: none;
  touch-action: none;
  cursor: inherit;
  -webkit-user-drag: none;
`,AnimationImage=_ref=>{let{src,isVisible,width,height}=_ref,d=isVisible?"block":"none";return react.createElement(StyledImage,{alt:"Rotating object",src,width,height,style:{display:`${d}`}})},AnimationImage_AnimationImage=AnimationImage;try{AnimationImage.displayName="AnimationImage",AnimationImage.__docgenInfo={description:"",displayName:"AnimationImage",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},isVisible:{defaultValue:null,description:"",name:"isVisible",required:!0,type:{name:"boolean"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/AnimationImage/AnimationImage.tsx#AnimationImage"]={docgenInfo:AnimationImage.__docgenInfo,name:"AnimationImage",path:"src/components/AnimationImage/AnimationImage.tsx#AnimationImage"})}catch(__react_docgen_typescript_loader_error){}function Icon(_ref){let{className}=_ref;return react.createElement("svg",{className,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},react.createElement("path",{d:"M12 6C6.3 6 2 8.15 2 11c0 2.45 3.19 4.38 7.71 4.88l-.42.41a1 1 0 000 1.42 1 1 0 001.42 0l2-2a1 1 0 00.21-.33 1 1 0 000-.76 1 1 0 00-.21-.33l-2-2a1 1 0 00-1.42 1.42l.12.11C6 13.34 4 12 4 11c0-1.22 3.12-3 8-3s8 1.78 8 3c0 .83-1.45 2-4.21 2.6a1 1 0 00-.79 1.19 1 1 0 001.19.77c3.65-.8 5.81-2.5 5.81-4.56 0-2.85-4.3-5-10-5z"}))}const RotateIcon=Icon;try{Icon.displayName="Icon",Icon.__docgenInfo={description:"",displayName:"Icon",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/RotateIcon.tsx#Icon"]={docgenInfo:Icon.__docgenInfo,name:"Icon",path:"src/components/icons/RotateIcon.tsx#Icon"})}catch(__react_docgen_typescript_loader_error){}const StyledRotateIcon=(0,styled_components_browser_esm.ZP)(RotateIcon)`
  position: absolute;

  fill: #eee;
  text-shadow: 4px 5px black;
  filter: drop-shadow(3px 3px 2px rgba(0, 0, 0, 0.7));
  opacity: 0.8;
  ${props=>styled_components_browser_esm.iv`
      top: calc(50% -${props=>props.theme.main} ${props.widthInEm/2}em);
      left: calc(50% - ${props.widthInEm/2}em);
      width: ${props.widthInEm}em;
      transform: scaleX(${props.isReverse?"-1":"1"});
    `};
`,icons_StyledRotateIcon=StyledRotateIcon;try{StyledRotateIcon.displayName="StyledRotateIcon",StyledRotateIcon.__docgenInfo={description:"",displayName:"StyledRotateIcon",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"void | WebTarget"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"void | WebTarget"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/StyledRotateIcon.tsx#StyledRotateIcon"]={docgenInfo:StyledRotateIcon.__docgenInfo,name:"StyledRotateIcon",path:"src/components/icons/StyledRotateIcon.tsx#StyledRotateIcon"})}catch(__react_docgen_typescript_loader_error){}function moduloWithoutNegative(value,n){return(value%n+n)%n}const StyledDiv=styled_components_browser_esm.ZP.div`
  position: relative;
  border: none;
  padding: 5px;
  display: inline-block;
  user-select: none;
  touch-action: none;
  ${props=>props.isGrabbing?styled_components_browser_esm.iv`
          cursor: grabbing;
        `:styled_components_browser_esm.iv`
          cursor: pointer;
        `};
`,React360Viewer=_ref=>{let{imagesCount,imagesBaseUrl,imageIndexSeparator,imagesFiletype,imageFilenamePrefix,mouseDragSpeed=20,reverse=!1,autoplaySpeed=10,autoplay=!1,autoplayTarget,width=150,height=150,zeroPad=0,showRotationIconOnStartup=!1,customRotationIcon,imageInitialIndex=0,shouldNotifyEvents=!1,notifyOnPointerDown,notifyOnPointerUp,notifyOnPointerMoved}=_ref;const elementRef=(0,react.useRef)(null),[isScrolling,setIsScrolling]=(0,react.useState)(!1),[initialMousePosition,setInitialMousePosition]=(0,react.useState)(0),[startingImageIndexOnPointerDown,setStartingImageIndexOnPointerDown]=(0,react.useState)(0),[currentMousePosition,setCurrentMousePosition]=(0,react.useState)(0),[selectedImageIndex,setSelectedImageIndex]=(0,react.useState)(0),[imageSources,setImageSources]=(0,react.useState)([]),[showRotationIcon,setShowRotationIcon]=(0,react.useState)(showRotationIconOnStartup),[useAutoplay,setUseAutoplay]=(0,react.useState)(autoplay);(0,react.useEffect)((()=>{setUseAutoplay(autoplay),setShowRotationIcon(!autoplay&&showRotationIconOnStartup)}),[autoplay,showRotationIconOnStartup]),(0,react.useEffect)((()=>{void 0!==imageInitialIndex&&((imageInitialIndex<0||imageInitialIndex>=imagesCount)&&(setSelectedImageIndex(imageInitialIndex),console.log(`ImageInitialIndex of ${imageInitialIndex} was out of bounds of 0 and count: ${imagesCount}`)),setSelectedImageIndex(imageInitialIndex))}),[imageInitialIndex,imagesCount]),(0,react.useEffect)((()=>{if(!useAutoplay)return;const timer=setTimeout((()=>{incrementImageIndex(1)}),1e3/autoplaySpeed);return()=>clearTimeout(timer)}));const incrementImageIndex=change=>{let index=moduloWithoutNegative(selectedImageIndex+(reverse?-1:1)*Math.floor(change),imagesCount);setSelectedImageIndex(index),void 0!==autoplayTarget&&index===autoplayTarget&&setUseAutoplay(!1)};(0,react.useEffect)((()=>{setImageSources(function createImageSources(){let baseUrl;baseUrl=void 0!==imageIndexSeparator?imagesBaseUrl+imageIndexSeparator:imagesBaseUrl.endsWith("/")?imagesBaseUrl:imagesBaseUrl+"/";let srces=[],fileType=imagesFiletype.replace(".","");for(let i=1;i<=imagesCount;i++)srces.push({src:`${baseUrl}${imageFilenamePrefix||""}${zeroPad?String(i).padStart(zeroPad+1,"0"):i}.${fileType}`,index:i.toString()});return srces}())}),[imagesBaseUrl,imagesFiletype,imagesCount,imageFilenamePrefix,zeroPad]);const onMouseUp=e=>{setIsScrolling(!1),shouldNotifyEvents&&(void 0!==e?notifyOnPointerUp?.(e?.clientX,e.clientY):notifyOnPointerUp?.(0,0))};return(0,react.useEffect)((()=>{if(!isScrolling)return;((start,offset)=>{let index=moduloWithoutNegative(start+(reverse?-1:1)*Math.floor(offset),imagesCount);setSelectedImageIndex(index)})(startingImageIndexOnPointerDown,(currentMousePosition-initialMousePosition)/(1/mouseDragSpeed*(imagesCount*width/100)))}),[currentMousePosition,imagesCount,startingImageIndexOnPointerDown,initialMousePosition,isScrolling,mouseDragSpeed,width,height,reverse]),react.createElement(StyledDiv,{ref:elementRef,isGrabbing:isScrolling,onPointerDown:e=>{setInitialMousePosition(e.clientX),setCurrentMousePosition(e.clientX),setStartingImageIndexOnPointerDown(selectedImageIndex),setUseAutoplay(!1),setIsScrolling(!0),setShowRotationIcon(!1),document.addEventListener("mouseup",(()=>{onMouseUp()}),{once:!0}),shouldNotifyEvents&&notifyOnPointerDown?.(e.clientX,e.clientY)},onPointerMove:e=>{isScrolling&&(setCurrentMousePosition(e.clientX),shouldNotifyEvents&&notifyOnPointerMoved?.(e.clientX,e.clientY))}},showRotationIcon?react.createElement(react.Fragment,null,customRotationIcon?react.createElement(react.Fragment,null,customRotationIcon()):react.createElement(icons_StyledRotateIcon,{widthInEm:2,isReverse:reverse})):null,imageSources.map(((s,index)=>react.createElement(AnimationImage_AnimationImage,{src:s.src,width,height,isVisible:index===selectedImageIndex,key:index}))))};try{React360Viewer.displayName="React360Viewer",React360Viewer.__docgenInfo={description:"",displayName:"React360Viewer",props:{imagesCount:{defaultValue:null,description:"",name:"imagesCount",required:!0,type:{name:"number"}},imagesBaseUrl:{defaultValue:null,description:"",name:"imagesBaseUrl",required:!0,type:{name:"string"}},imageIndexSeparator:{defaultValue:null,description:"",name:"imageIndexSeparator",required:!1,type:{name:"string"}},imagesFiletype:{defaultValue:null,description:"",name:"imagesFiletype",required:!0,type:{name:"string"}},imageFilenamePrefix:{defaultValue:null,description:"",name:"imageFilenamePrefix",required:!0,type:{name:"string"}},imageInitialIndex:{defaultValue:{value:"0"},description:"",name:"imageInitialIndex",required:!1,type:{name:"number"}},mouseDragSpeed:{defaultValue:{value:"20"},description:"",name:"mouseDragSpeed",required:!1,type:{name:"number"}},autoplaySpeed:{defaultValue:{value:"10"},description:"",name:"autoplaySpeed",required:!1,type:{name:"number"}},reverse:{defaultValue:{value:"false"},description:"",name:"reverse",required:!1,type:{name:"boolean"}},autoplay:{defaultValue:{value:"false"},description:"",name:"autoplay",required:!1,type:{name:"boolean"}},autoplayTarget:{defaultValue:null,description:"",name:"autoplayTarget",required:!1,type:{name:"number"}},width:{defaultValue:{value:"150"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"150"},description:"",name:"height",required:!1,type:{name:"number"}},zeroPad:{defaultValue:{value:"0"},description:"",name:"zeroPad",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"},{value:"7"},{value:"8"},{value:"9"}]}},showRotationIconOnStartup:{defaultValue:{value:"false"},description:"",name:"showRotationIconOnStartup",required:!1,type:{name:"boolean"}},customRotationIcon:{defaultValue:null,description:"",name:"customRotationIcon",required:!1,type:{name:"(() => ReactNode)"}},notifyOnPointerDown:{defaultValue:null,description:"",name:"notifyOnPointerDown",required:!1,type:{name:"((x: number, y: number) => void)"}},notifyOnPointerUp:{defaultValue:null,description:"",name:"notifyOnPointerUp",required:!1,type:{name:"((x: number, y: number) => void)"}},notifyOnPointerMoved:{defaultValue:null,description:"",name:"notifyOnPointerMoved",required:!1,type:{name:"((x: number, y: number) => void)"}},shouldNotifyEvents:{defaultValue:{value:"false"},description:"",name:"shouldNotifyEvents",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/React360Viewer/React360Viewer.tsx#React360Viewer"]={docgenInfo:React360Viewer.__docgenInfo,name:"React360Viewer",path:"src/components/React360Viewer/React360Viewer.tsx#React360Viewer"})}catch(__react_docgen_typescript_loader_error){}const React360Viewer_stories={title:"React360Viewer",component:React360Viewer,argTypes:{notifyOnPointerDown:{action:"notifyOnPointerDown"},notifyOnPointerMoved:{action:"notifyOnPointerMoved"},notifyOnPointerUp:{action:"notifyOnPointerUp"}}},Template=args=>react.createElement("div",{style:{border:"1px solid red",borderRadius:"5px",boxShadow:"5px 5px 5px grey"}},react.createElement(React360Viewer,args)," "),Standard=Template.bind({}),baseImageSetting={imagesBaseUrl:"./imageSeries/",imagesCount:36,imagesFiletype:"png",mouseDragSpeed:20};Standard.args={...baseImageSetting,reverse:!1};const AutoPlayReversed=Template.bind({});AutoPlayReversed.args={...baseImageSetting,reverse:!0,autoplay:!0},AutoPlayReversed.parameters={chromatic:{disableSnapshot:!0}},Standard.parameters={...Standard.parameters,docs:{...Standard.parameters?.docs,source:{originalSource:'(args: React360ViewerProps) => {\n  return <div style={{\n    border: "1px solid red",\n    borderRadius: "5px",\n    boxShadow: "5px 5px 5px grey"\n  }}>\n      <React360Viewer {...args} />{" "}\n    </div>;\n}',...Standard.parameters?.docs?.source}}},AutoPlayReversed.parameters={...AutoPlayReversed.parameters,docs:{...AutoPlayReversed.parameters?.docs,source:{originalSource:'(args: React360ViewerProps) => {\n  return <div style={{\n    border: "1px solid red",\n    borderRadius: "5px",\n    boxShadow: "5px 5px 5px grey"\n  }}>\n      <React360Viewer {...args} />{" "}\n    </div>;\n}',...AutoPlayReversed.parameters?.docs?.source}}};const __namedExportsOrder=["Standard","AutoPlayReversed"]}}]);
//# sourceMappingURL=stories-React360Viewer-stories.c4f02a91.iframe.bundle.js.map